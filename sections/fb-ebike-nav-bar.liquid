{%- assign country_code_var = localization.country.iso_code | downcase -%}
{%- if product == blank -%}
    {%- assign product = section.settings.nav_product -%}
{%- endif -%}
{%- assign single_product = true -%}
{%- for number_vari in product.variants -%}
{%- if forloop.length > 1 -%}
{%- assign single_product = false -%}
{%- endif -%}
{%- endfor -%}
<div id="section-{{ section.id }}" class="fb-ebike-nav-bar">
    <div class="ebike-eb-content">
        <div class="ebike-eb-left">
            <div class="ebike-ebl-1">
                <div class="ebike-ebl-1-1 js-ebike-mobtop-open">
                    <span> {{ section.settings.bike_type }} </span>
                    <span class="ebike-ebl-nav-hide">  · </span>
                    <span class="ebike-ebl-mob-1 ebike-ebl-nav-hide js-current-navtitle">
                    </span>
                    <img
                        class="ebike-ebl-nav-icon-img ebike-ebl-nav-hide"
                        src="https://cdn.shopify.com/s/files/1/0592/3766/2905/files/updaown.png?v=1668668770"
                        alt=""
                        loading="lazy"
                        width="10"
                        height="10"
                    >
                </div>
                <ul class="ebike-ebl-1-2">
                    {%- if single_product -%}
                    {%- for block in section.blocks -%}
                    {% assign product_box = block.settings.is_colorlitbike_product %}
                    {%- assign img_circle = block.settings.colorlitbike_default_img | img_url: '' -%}
                    {%- if country_code_var == 'gb' or country_code_var == 'au' -%}
                   <!-- {{ product_box | json}} -->
                        {%- if product_box == 'lit-bike-moonbow-beige' or product_box == 'lit-bike' or product_box == 'boom-bike-arctic-white'  or product_box == 'boom-bike-mist-grey' -%}
                            <a href="{{ colorlitbike_url | default:  product_box.url }}"
                                class="ebike-choose-imgdefalut-top bike-{{- block.settings.is_colorlitbike_name | replace: ' ' , '-' -}}-color {% if product_box.title == product.title %}ebike-choose-item-checked{% endif %}">
                                {%- if product_box.title contains 'White' -%}
                                <img class="ebike-choose-icon"
                                    src="https://cdn.shopify.com/s/files/1/0592/3766/2905/files/bike-bloak.png?v=1692607977">
                                {%- else -%}
                                <img class="ebike-choose-icon"
                                    src="https://cdn.shopify.com/s/files/1/0592/3766/2905/files/Vector-checked.png?v=1687681663">
                                {%- endif -%}
                            </a>
                        {% endif %}
                    {% elsif country_code_var == 'ca' %}
                        {%- if product_box == 'lit-bike-moonbow-beige' or product_box == 'lit-bike' or product_box == 'lit-bike-snowpeak-white' or product_box == 'lit-bike-klarna-limited-edition' or product_box == 'boom-bike-arctic-white' -%}
                            <a href="{{ colorlitbike_url | default:  product_box.url }}"
                                class="ebike-choose-imgdefalut-top bike-{{- block.settings.is_colorlitbike_name | replace: ' ' , '-' -}}-color {% if product_box.title == product.title %}ebike-choose-item-checked{% endif %}">
                                {%- if product_box.title contains 'White' -%}
                                <img class="ebike-choose-icon"
                                    src="https://cdn.shopify.com/s/files/1/0592/3766/2905/files/bike-bloak.png?v=1692607977">
                                {%- else -%}
                                <img class="ebike-choose-icon"
                                    src="https://cdn.shopify.com/s/files/1/0592/3766/2905/files/Vector-checked.png?v=1687681663">
                                {%- endif -%}
                            </a>
                        {% endif %}
                    {%- else -%}
                    <a href="{{ colorlitbike_url | default:  product_box.url }}"
                        class="ebike-choose-imgdefalut-top bike-{{- block.settings.is_colorlitbike_name | replace: ' ' , '-' -}}-color {% if product_box.title == product.title %}ebike-choose-item-checked{% endif %}">
                        {%- if product_box.title contains 'White' -%}
                        <img class="ebike-choose-icon"
                            src="https://cdn.shopify.com/s/files/1/0592/3766/2905/files/bike-bloak.png?v=1692607977">
                        {%- else -%}
                        <img class="ebike-choose-icon"
                            src="https://cdn.shopify.com/s/files/1/0592/3766/2905/files/Vector-checked.png?v=1687681663">
                        {%- endif -%}
                    </a>
                    {%- endif -%}
                    {%- endfor -%} 
                    {%- else -%}
                        {%- for option in product.options_with_values -%}
                            {%- if option.name == 'Color' -%}
                                {%- for value in option.values -%}
                                    <li class="ebike-choose-imgdefalut-top ebike-{{value | replace: ' ' , '-'}} {% if forloop.index == 1 %}ebike-choose-item-checked{% endif %} js-ebike-productcolor"
                                        data-color="{{ value }}"
                                        data-type="nav"
                                    >
                                        <img class="ebike-choose-icon-top" src="https://cdn.shopify.com/s/files/1/0592/3766/2905/files/Vector-checked.png?v=1687681663">
                                    </li>
                                {%- endfor -%} 
                            {%- endif -%}
                        
                        {%- endfor -%}   
                    {%- endif -%}
                </ul>
            </div>
            <div class="ebike-ebl-2 fb_ebike_top_frame js-ebike-mobtop-frame">
                <div class="ebike-ebl-2-1 js-ebike-eblt-abox">
                    {% comment %} {% for block in section.blocks %}
                        <a class="js-ebike-eblt-navchoose {% if forloop.index == 1 %}ebike-eblt-select{% endif %}" href="javascript:void(0);"
                            data-categorize="{{ block.settings.section_title }}"
                        >
                            {{ block.settings.section_title }}
                        </a>
                    {% endfor %} {% endcomment %}
                </div>
            </div>
        </div>
        
        <div class="ebike-eb-right">
            <div class="ebike-ebr-flex">
                <div class="ebike-ebr-1">
                    <div class="ebike-ebr-1-1">
                        <span class="ab-origin">{%- render 'customer-price-control', type:'origin', cpc_product: product -%}</span>
                        <span class="ab-current">
                            {% render 'customer-price-control', type:'sale', cpc_product: product %}
                        </span>
                    </div>
                    {%- if country_code_var != 'au' -%}
                        <div class="ebike-ebr-1-2">
                            <span>Pay ${%- render 'customer-price-control', type:'mo', cpc_product: product -%}/mo¹, at 0% APR</span>
                        </div>
                    {%- endif -%}
                </div>
                <div class="ebike-ebr-2">
                    <button class="prboom_button_one js-ebike-addtocart" 
                        data-soldout="SOLD OUT"
                        data-soldout-style="true"
                        data-origintext="{{ section.settings.bike_button_text }}"
                    > 
                    <span>{{ section.settings.bike_button_text }}</span>
                 </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% schema %}
{
  "name": "FbEbikeNavBar",
  "presets": [
    {
      "name": "fb-ebike-nav-bar",
      "category": "fb-ebike-nav-bar"
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "TOP NAV SECTION"
    },
    {
        "type": "product",
        "id": "nav_product",
        "label": "Product"
    },
    {
        "type": "text",
        "id": "bike_type",
        "label": "Bike Type",
        "default": "E-Bike"
    },
    {
        "type": "text",
        "id": "bike_button_text",
        "label": "Button Text",
        "default": "ADD TO CART"
    }

  ],
  "blocks": [
    {
        "type": "colorArr",
        "name": "add lit bike color",
        "settings": [
            {
                "type": "text",
                "id": "is_colorlitbike_name",
                "label": "Litbike Color Name"
            },
            {
                "type": "product",
                "id": "is_colorlitbike_product",
                "label": "Product"
            },
            {
                "type": "image_picker",
                "id": "colorlitbike_default_img",
                "label": "Mob Default Image"
            },
            {
                "type": "url",
                "id": "colorlitbike_url",
                "label": "Link"
            }
        ]
    }

  ]
}
{% endschema %}
<style>
    #shopify-section-{{ section.id }}{
        position: sticky;
        top: 90px;
        left:0;
        z-index: 4;
    }
</style>
