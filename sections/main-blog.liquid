<div id="section-{{ section.id }}" class="Section" data-section-id="{{ section.id }}" data-section-type="article-list">
  <div class="Container relative mx-auto px-5 pb-10 fb-sm:px-10 fb-sm:pb-14 fb-md:px-20 max-w-75r">
    <header class="PageHeader relative mt-8 fb-md:mt-20 w-full ">
      <div class="SectionHeader SectionHeader--center text-center">
        <h1 class="mb-7 w-full text-center text-24 font-bold text-121212 fb-md:mb-10 fb-md:text-32 uppercase">
          {{- blog.title -}}
        </h1>

        {%- if section.settings.show_tags and blog.all_tags.size > 0 -%}
          <ul class="Blog__TagList HorizontalList HorizontalList--spacingExtraLoose">
            <li class="HorizontalList__Item mx-2 my-1 inline-block fb-md:mx-3 fb-md:mb-8">
              <a
                href="/blogs/{{ blog.handle }}"
                class="text-14 font-bold uppercase text-666666 hover:!text-121212 hover:underline hover:underline-offset-4 fb-md:text-16 {% if current_tags == blank %} underline underline-offset-4 !text-121212{% endif %}"
              >
                ALL
              </a>
            </li>

            {%- for tag in blog.all_tags -%}
              <li class="HorizontalList__Item mx-2 my-1 inline-block">
                <a
                  href="/blogs/{{ blog.handle }}/tagged/{{ tag | handle }}"
                  class="text-14 font-bold uppercase text-666666 hover:!text-121212 hover:underline hover:underline-offset-4 {% if current_tags contains tag %} underline underline-offset-4 !text-121212{% endif %}"
                >
                  {{- tag -}}
                </a>
              </li>
            {%- endfor -%}
          </ul>
        {%- endif -%}
      </div>
    </header>

    {%- if section.settings.show_featured_article and current_tags == blank -%}
      {%- assign articles_per_page = 13 -%}
    {%- else -%}
      {%- assign articles_per_page = 12 -%}
    {%- endif -%}

    {%- paginate blog.articles by articles_per_page -%}
      {% assign is_first_article_featured = false %}

      {%- if section.settings.show_featured_article and current_tags == blank and blog.articles.first.image -%}
        {%- assign is_first_article_featured = true -%}
      {%- endif -%}

      <div class="ArticleListWrapper">
        {%- assign firstArticle = blog.articles | first -%}

        <div class="pc-first-item hidden fb-sm:block">
          <div class="FlexboxIeFix flex flex-row rounded-2xl">
            <div
              class="fb-sm:min-h-26r relative w-full rounded-2xl"
              style="background: url({{ firstArticle.image | img_url: '', format: 'jpg' }})"
            >
              <div class="ImageHero__TextContent absolute bottom-0 left-0 px-10 py-10">
                <header class="SectionHeader text-white">
                  {%- if section.settings.show_category and firstArticle.tags != empty -%}
                    <span class=" mb-8 block text-16 font-bold">{{ firstArticle.tags.first }}</span>
                  {%- endif -%}

                  <h2 class="mb-10 text-24 font-bold fb-md:text-32">
                    <a href="{{ firstArticle.url }}">{{ firstArticle.title }}</a>
                  </h2>

                  <div class="SectionHeader__ButtonWrapper mb-5 flex items-center justify-center rounded-lg bg-white h-12 w-15r text-16 font-bold uppercase text-121212">
                    <a
                      href="{{ firstArticle.url }}"
                      class="block "
                    >
                      read_more
                    </a>
                  </div>
                </header>
              </div>
            </div>
          </div>
        </div>

        <div class="ArticleList grid fb-sm:grid-cols-2 fb-sm:gap-8 fb-md:grid-cols-3 fb-md:gap-10 {% if is_first_article_featured %}ArticleList--withFeatured{% endif %} Grid Grid--m">
          {%- for article in blog.articles -%}
            <div class="{% if is_first_article_featured and forloop.first %}hidden{% else %} {% endif %}">
              {%- render 'article-item', article: article -%}
            </div>
          {%- endfor -%}
        </div>
      </div>

      {%- render 'pagination', paginate: paginate -%}
    {%- endpaginate -%}
  </div>
</div>

<style>
  #section-{{ section.id }} .ImageHero,
  #section-{{ section.id }} .ImageHero .Heading {
    color: #ffffff;
  }

  #section-{{ section.id }} .ImageHero .Button {
    color: #1c1c1c;
    border-color: #ffffff;
  }

  #section-{{ section.id }} .ImageHero .Button::before {
    background-color: #ffffff;
  }

  {%- if settings.show_button_transition -%}
    @media (-moz-touch-enabled: 0), (hover: hover) {
      #section-{{ section.id }} .ImageHero .Button:hover {
        color: #ffffff;
      }
    }
  {%- endif -%}
</style>

{% schema %}
{
  "name": "Blog page",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_tags",
      "label": "Show filters",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_featured_article",
      "label": "Show featured article",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_category",
      "label": "Show article category",
      "info": "The first article's tag is used as the main category.",
      "default": true
    }
  ]
}
{% endschema %}
