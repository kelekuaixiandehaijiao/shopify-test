{%- style -%}
  .fbhomebaner-swiper-pagination .swiper-pagination-bullet-active {
    background: #000 !important;
    border: 1px solid #000 !important;
  }

  .fbhomebaner-swiper-pagination .swiper-pagination-bullet {
    background: rgba(0, 0, 0, 0.15);
    border: 1px solid #fff;
    opacity: 1;
  }
  .fbhomebaner-swiper-pagination {
    width: 100%;
    bottom: 20px;
    padding-left: 20px;
    position: absolute;
    z-index: 3;
    text-align: left;
  }
  @media screen and (min-width: 1008px) {
    .fbhomebaner-swiper-pagination {
      bottom: 28px;
      padding-right: 24px;
      left: auto;
      text-align: right;
    }
  }
  .fullscreen {
    height:calc(var(--window-height) - var(--header-height) - var(--announcement-bar-height, 0px));
    max-height: 100vh;
  }
{%- endstyle -%}
{%- capture country_banner -%}
  <section
    id="section-{{ section.id }}"
    data-section-id="{{ section.id }}"
    class="fb-newhome-baner {{ section.settings.additional_class | default: 'fb-us-newhome-banner' }}"
    data-type="swiper">
    <div class="fbHomeImgVideoBanner relative{% if section.settings.show_fullscreen == false %}{% else %} fullscreen{% endif %}">
      <div class="swiper-wrapper">
        {%- for block in section.blocks -%}
          {% comment %} 图片模块 {% endcomment %}
          {%- capture slide_image_content -%}
            {%- assign mobile_image = block.settings.mobile_image | default: block.settings.image -%}
            {%- assign mobile_image_new = mobile_image | img_url: '' -%}
            {%- if mobile_image -%}
              <div class="h-full w-full fb-sm:hidden" style="{% unless section.settings.show_fullscreen %}--aspect-ratio: {{ mobile_image.aspect_ratio }};{% endunless %} background-image: url({{ mobile_image | img_url: '1x1', format: 'jpg' }})">
                <img
                  class="h-full w-full object-cover"
                  src="{{ mobile_image_new }}"
                  alt="{{ block.settings.mobile_image.alt | escape }}"
                  data-sizes="auto"
                  data-optimumx="1.2"
                  data-widths="[400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 2200]"
                >
              </div>
            {%- endif -%}
            <div class="hidden h-full w-full fb-sm:block" 
              style="background-image: url({{ block.settings.image | img_url: '1x1', format: 'jpg' }})">
              {% assign image_url = block.settings.image | img_url: '' %}
              <img
                class="h-full w-full object-cover"
                src="{{ image_url }}"
                alt="{{ block.settings.image.alt | escape }}"
                data-sizes="auto"
                data-optimumx="1.2"
                data-widths="[400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 2200]"
              >
                
            </div>
          {%- endcapture -%}
          {% comment %} 视频模块 {% endcomment %}
          {%- capture slide_video_content -%}
          {%- assign mobile_vedio = block.settings.video_mobile_url | default: block.settings.video_url -%}
            <div class="h-full w-full fb-sm:hidden">
              <video
                class="Image--lazyLoad h-full w-full object-cover"
                x-webkit-airplay="allow"
                webkit-playsinline="true"
                playsinline="true"
                autoplay="autoplay"
                muted="muted"
                loop="loop"
                data-src="{{ mobile_vedio }}"
                alt="{{ mobile_vedio.alt | escape }}"></video>

            </div>
            <div class="hidden h-full w-full fb-sm:block">
              <video
                class="Image--lazyLoad w-full h-full object-cover"
                x-webkit-airplay="allow"
                webkit-playsinline="true"
                playsinline="true"
                autoplay="autoplay"
                muted="muted"
                loop="loop"
                data-src="{{ block.settings.video_url }}"></video>
            </div>
          {%- endcapture -%}
          {% comment %} 文字模块 {% endcomment %}
          {%- capture slideshow_text_content -%}
            {%- render 'fb-img-video-text3', block: block, type: 'img' -%}
          {%- endcapture -%}
          {%- capture slideshow_text_box -%}
            {%- if slideshow_text_content != blank -%}
              {%- if block.settings.content_position_pc == 'middleLeft' -%}
                <div class="absolute top-0 hidden h-full w-full items-center px-20 text-start fb-sm:flex">
                  <header class="SectionHeader">
                    {{ slideshow_text_content }}
                  </header>
                </div>
              {%- else -%}
                  <div class="absolute flex flex-col items-center justify-center">
                    <header class="SectionHeader">
                      {{ slideshow_text_content }}
                    </header>
                  </div>
              {%- endif -%}
              {%- if block.settings.content_position_mobile == 'bottomLeft' -%}
                <div class=" absolute bottom-16 justify-start px-3 fb-sm:hidden">
                  <header class="SectionHeader">
                    {{ slideshow_text_content }}
                  </header>
                </div>
              {%- else -%}
                <div class="absolute top-10 mx-auto w-full px-3 text-center fb-sm:hidden">
                  <header class="SectionHeader">
                    {{ slideshow_text_content }}
                  </header>
                </div>
              {%- endif -%}
              
            {%- endif -%}
          {%- endcapture -%}
          {% comment %} 文字模块结束 {% endcomment %}

          {% comment %} 判断video和image类型 {% endcomment %}
          {%- capture slideshow_type_banner -%}
            {%- if block.type == 'image_banner' -%}
              {{- slide_image_content -}}
            {%- else -%}
              {{- slide_video_content -}}
            {%- endif -%}
            {{- slideshow_text_box -}}
          {%- endcapture -%}

          {%- if block.settings.button_1_text == blank and block.settings.banner_href -%}
            <a
              href="{{ block.settings.button_1_link }}"
              class="swiper-slide js-homebanner-slid js-banner-kinds relative h-full w-full"
              data-slide-index="{{ forloop.index0 }}"
              data-number="{{ forloop.index }}"
              data-type="{{ block.type }}"
              data-length="{{ forloop.length }}">
              {{- slideshow_type_banner -}}
            </a>
          {%- else -%}
            <div
              id="Slide{{ block.id }}"
              class="swiper-slide js-homebanner-slid js-banner-kinds relative h-full w-full"
              data-slide-index="{{ forloop.index0 }}"
              data-number="{{ forloop.index }}"
              data-type="{{ block.type }}"
              data-length="{{ forloop.length }}">
              {{- slideshow_type_banner -}}
            </div>
          {%- endif -%}
        {%- endfor -%}
      </div>
      <div class="fbhomebaner-swiper-pagination"></div>
    </div>

  </section>
{%- endcapture -%}
{%- assign country_code_var = localization.country.iso_code | downcase -%}
{%- if country_code_var == 'gb' and section.settings.additional_class == 'britain-img-banner' -%}
  {{ country_banner }}
{%- elsif country_code_var != 'gb' and section.settings.additional_class != 'britain-img-banner' -%}
  {{ country_banner }}
{%- endif -%}

{% schema %}
{
  "name": "FbImgVideoBanner",
  "class": "shopify-section--slideshow",
  "presets": [
    {
      "name": "fb-img-video-banner",
      "category": "Fb Sections",
      "blocks": [
        {
          "type": "image_banner"
        },
        {
          "type": "video_banner"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "select",
      "id": "additional_class",
      "label": "Additional Operations",
      "options": [
        {
          "value": "britain-img-banner",
          "label": "britain"
        },
        {
          "value": "figpii-img-banner",
          "label": "AB test"
        },
        {
          "value": "",
          "label": "Default"
        }
      ],
      "default": ""
    },
    {
      "type": "checkbox",
      "id": "show_fullscreen",
      "label": "Show full-screen images",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_arrow",
      "label": "Show bottom arrow",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Auto rotate between slides",
      "default": true
    },
    {
      "type": "range",
      "id": "cycle_speed",
      "min": 3,
      "max": 8,
      "step": 1,
      "unit": "sec",
      "label": "Change slides every",
      "default": 5
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button text",
      "default": "#363636"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button background",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "image_banner",
      "name": "Image Banner",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "checkbox",
          "id": "banner_href",
          "label": "Image Href",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "1800 x 800px .jpg recommended"
        },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "Mobile image",
          "info": "750 x 1100px .jpg recommended. If none is set, desktop image will be cropped."
        },
        {
          "type": "checkbox",
          "id": "apply_overlay",
          "label": "Apply overlay on image",
          "info": "This can improve text visibility.",
          "default": true
        },
        {
          "type": "select",
          "id": "content_position_pc",
          "label": "Content position Pc",
          "options": [
            {
              "value": "middleLeft",
              "label": "Middle left"
            },
            {
              "value": "boxCenter",
              "label": "Box Center"
            }
          ],
          "default": "middleLeft"
        },
        {
          "type": "select",
          "id": "content_position_mobile",
          "label": "Content position Mobile",
          "options": [
            {
              "value": "topCenter",
              "label": "Top Center"
            },
            {
              "value": "bottomLeft",
              "label": "Bottom left"
            }
          ],
          "default": "bottomLeft"
        },
        {
          "type": "url",
          "id": "pc_gift_img",
          "label": "Pc Gift Img Link"
        },
        {
          "type": "url",
          "id": "mb_gift_img",
          "label": "Mb Gift Img Link"
        },
        {
          "type": "header",
          "content": "Italics are underscores"
        },
        {
          "type": "richtext",
          "id": "banner_sub_title",
          "label": "Banner Sub Title"
        },
        {
          "type": "color",
          "id": "banner_sub_title_color",
          "label": "Banner Sub Title Color"
        },
        {
          "type": "richtext",
          "id": "banner_sub_title_mob",
          "label": "Banner Sub Title Mob"
        },
        {
          "type": "color",
          "id": "banner_sub_title_color_mob",
          "label": "Banner Sub Title Color Mob"
        },
        {
          "type": "richtext",
          "id": "banner_title",
          "label": "Banner Title"
        },
        {
          "type": "color",
          "id": "banner_title_color",
          "label": "Banner Title Color"
        },
        {
          "type": "richtext",
          "id": "banner_title_mob",
          "label": "Banner Title Mob"
        },
        {
          "type": "color",
          "id": "banner_title_color_mob",
          "label": "Banner Title Color Mob"
        },
        {
          "type": "richtext",
          "id": "banner_desc",
          "label": "Banner Desc"
        },
        {
          "type": "color",
          "id": "banner_desc_color",
          "label": "Banner Desc Color"
        },
        {
          "type": "richtext",
          "id": "banner_desc_mob",
          "label": "Banner Desc Mob"
        },
        {
          "type": "color",
          "id": "banner_desc_color_mob",
          "label": "Banner Desc Color Mob"
        },
        {
          "type": "image_picker",
          "id": "banner_icon",
          "label": "Banner Icon"
        },
        {
          "type": "image_picker",
          "id": "banner_icon_mob",
          "label": "Banner Icon mob"
        },
        {
          "type": "header",
          "content": "Button 1"
        },
        {
          "type": "text",
          "id": "button_1_text",
          "label": "button 1 Text"
        },
        {
          "type": "color",
          "id": "button_1_text_color",
          "label": "Button 1 Text Color"
        },
        {
          "type": "color",
          "id": "button_1_text_backgroundcolor",
          "label": "Button 1 Text BackgroundColor"
        },
        {
          "type": "color",
          "id": "button_1_text_bordercolor",
          "label": "Button 1 Text BorderColor"
        },
        {
          "type": "checkbox",
          "id": "button_1_open_dialog",
          "label": "Is Open button 1 Video Dialog",
          "default": false
        },
        {
          "type": "url",
          "id": "button_1_link",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Button 1 Mob"
        },
        {
          "type": "text",
          "id": "button_1_text_mob",
          "label": "button 1 Text Mob"
        },
        {
          "type": "color",
          "id": "button_1_text_color_mob",
          "label": "Button 1 Text Color Mob"
        },
        {
          "type": "color",
          "id": "button_1_text_backgroundcolor_mob",
          "label": "Button 1 Text BackgroundColor_mob"
        },
        {
          "type": "color",
          "id": "button_1_text_bordercolor_mob",
          "label": "Button 1 Text BorderColor Mob"
        },
        {
          "type": "checkbox",
          "id": "button_1_open_dialog_mob",
          "label": "Is Open button 1 Video Dialog Mob",
          "default": false
        },
        {
          "type": "url",
          "id": "button_1_link_mob",
          "label": "Link Mob"
        },
        {
          "type": "header",
          "content": "Button 2"
        },
        {
          "type": "text",
          "id": "button_2_text",
          "label": "button 2 Text"
        },
        {
          "type": "color",
          "id": "button_2_text_color",
          "label": "Button 2 Text Color"
        },
        {
          "type": "color",
          "id": "button_2_text_backgroundcolor",
          "label": "Button 2 Text BackgroundColor"
        },
        {
          "type": "color",
          "id": "button_2_text_bordercolor",
          "label": "Button 2 Text BorderColor"
        },
        {
          "type": "checkbox",
          "id": "button_2_open_dialog",
          "label": "Is Open button 2 Video Dialog",
          "default": false
        },
        {
          "type": "url",
          "id": "button_2_link",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Button 2 Mob"
        },
        {
          "type": "text",
          "id": "button_2_text_mob",
          "label": "button 2 Text Mob"
        },
        {
          "type": "color",
          "id": "button_2_text_color_mob",
          "label": "Button 2 Text Color Mob"
        },
        {
          "type": "color",
          "id": "button_2_text_backgroundcolor_mob",
          "label": "Button 2 Text BackgroundColor Mob"
        },
        {
          "type": "color",
          "id": "button_2_text_bordercolor_mob",
          "label": "Button 2 Text BorderColor Mob"
        },
        {
          "type": "checkbox",
          "id": "button_2_open_dialog_mob",
          "label": "Is Open button 2 Video Dialog Mob",
          "default": false
        },
        {
          "type": "url",
          "id": "button_2_link_mob",
          "label": "Link"
        },
        {
          "type": "richtext",
          "id": "banner_more",
          "label": "Banner More"
        },
        {
          "type": "color",
          "id": "banner_more_color",
          "label": "Banner More Color"
        },
        {
          "type": "richtext",
          "id": "banner_more_mob",
          "label": "Banner More Mob"
        },
        {
          "type": "color",
          "id": "banner_more_color_mob",
          "label": "Banner More Color Mob"
        }
      ]
    },
    {
      "type": "video_banner",
      "name": "Video Banner",
      "settings": [
        {
          "type": "checkbox",
          "id": "banner_href",
          "label": "Video Banner Href",
          "default": false
        },
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "url",
          "id": "video_url",
          "label": "PC Video Url"
        },
        {
          "type": "url",
          "id": "video_mobile_url",
          "label": "Mobile Video Url"
        },
        {
          "type": "checkbox",
          "id": "apply_overlay",
          "label": "Apply overlay on vedio",
          "info": "This can improve text visibility.",
          "default": false
        },
        {
          "type": "select",
          "id": "content_position_pc",
          "label": "Content position Pc",
          "options": [
            {
              "value": "middleLeft",
              "label": "Middle left"
            },
            {
              "value": "boxCenter",
              "label": "Box Center"
            }
          ],
          "default": "middleLeft"
        },
        {
          "type": "select",
          "id": "content_position_mobile",
          "label": "Content position Mobile",
          "options": [
            {
              "value": "topCenter",
              "label": "Top Center"
            },
            {
              "value": "bottomLeft",
              "label": "Bottom left"
            }
          ],
          "default": "bottomLeft"
        },
        {
          "type": "header",
          "content": "Italics are underscores"
        },
        {
          "type": "richtext",
          "id": "banner_sub_title",
          "label": "Banner Sub Title"
        },
        {
          "type": "color",
          "id": "banner_sub_title_color",
          "label": "Banner Sub Title Color"
        },
        {
          "type": "richtext",
          "id": "banner_sub_title_mob",
          "label": "Banner Sub Title Mob"
        },
        {
          "type": "color",
          "id": "banner_sub_title_color_mob",
          "label": "Banner Sub Title Color Mob"
        },
        {
          "type": "richtext",
          "id": "banner_title",
          "label": "Banner Title"
        },
        {
          "type": "color",
          "id": "banner_title_color",
          "label": "Banner Title Color"
        },
        {
          "type": "richtext",
          "id": "banner_title_mob",
          "label": "Banner Title Mob"
        },
        {
          "type": "color",
          "id": "banner_title_color_mob",
          "label": "Banner Title Color Mob"
        },
        {
          "type": "richtext",
          "id": "banner_desc",
          "label": "Banner Desc"
        },
        {
          "type": "color",
          "id": "banner_desc_color",
          "label": "Banner Desc Color"
        },
        {
          "type": "richtext",
          "id": "banner_desc_mob",
          "label": "Banner Desc Mob"
        },
        {
          "type": "color",
          "id": "banner_desc_color_mob",
          "label": "Banner Desc Color Mob"
        },
        {
          "type": "image_picker",
          "id": "banner_icon",
          "label": "Banner Icon"
        },
        {
          "type": "image_picker",
          "id": "banner_icon_mob",
          "label": "Banner Icon mob"
        },
        {
          "type": "header",
          "content": "Button 1"
        },
        {
          "type": "text",
          "id": "button_1_text",
          "label": "Text"
        },
        {
          "type": "color",
          "id": "button_1_text_color",
          "label": "Button 1 Text Color"
        },
        {
          "type": "color",
          "id": "button_1_text_backgroundcolor",
          "label": "Button 1 Text BackgroundColor"
        },
        {
          "type": "color",
          "id": "button_1_text_bordercolor",
          "label": "Button 1 Text BorderColor"
        },
        {
          "type": "checkbox",
          "id": "button_1_open_dialog",
          "label": "Is Open button 1 Video Dialog",
          "default": false
        },
        {
          "type": "url",
          "id": "button_1_link",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Button 1 Mob"
        },
        {
          "type": "text",
          "id": "button_1_text_mob",
          "label": "Text Mob"
        },
        {
          "type": "color",
          "id": "button_1_text_color_mob",
          "label": "Button 1 Text Color Mob"
        },
        {
          "type": "color",
          "id": "button_1_text_backgroundcolor_mob",
          "label": "Button 1 Text BackgroundColor Mob"
        },
        {
          "type": "color",
          "id": "button_1_text_bordercolor_mob",
          "label": "Button 1 Text BorderColor Mob"
        },
        {
          "type": "checkbox",
          "id": "button_1_open_dialog_mob",
          "label": "Is Open button 1 Video Dialog Mob",
          "default": false
        },
        {
          "type": "url",
          "id": "button_1_link_mob",
          "label": "Link Mob"
        },
        {
          "type": "header",
          "content": "Button 2"
        },
        {
          "type": "text",
          "id": "button_2_text",
          "label": "Button 2 Text"
        },
        {
          "type": "color",
          "id": "button_2_text_color",
          "label": "Button 2 Text Color"
        },
        {
          "type": "color",
          "id": "button_2_text_backgroundcolor",
          "label": "Button 2 Text BackgroundColor"
        },
        {
          "type": "color",
          "id": "button_2_text_bordercolor",
          "label": "Button 2 Text BorderColor"
        },
        {
          "type": "checkbox",
          "id": "button_2_open_dialog",
          "label": "Is Open button 2 Video Dialog",
          "default": false
        },
        {
          "type": "url",
          "id": "button_2_link",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Button 2 Mob"
        },
        {
          "type": "text",
          "id": "button_2_text_mob",
          "label": "Button 2 Text Mob"
        },
        {
          "type": "color",
          "id": "button_2_text_color_mob",
          "label": "Button 2 Text Color Mob"
        },
        {
          "type": "color",
          "id": "button_2_text_backgroundcolor_mob",
          "label": "Button 2 Text BackgroundColor Mob"
        },
        {
          "type": "color",
          "id": "button_2_text_bordercolor_mob",
          "label": "Button 2 Text BorderColor Mob"
        },
        {
          "type": "checkbox",
          "id": "button_2_open_dialog_mob",
          "label": "Is Open button 2 Video Dialog Mob",
          "default": false
        },
        {
          "type": "url",
          "id": "button_2_link_mob",
          "label": "Link"
        },
        {
          "type": "richtext",
          "id": "banner_more",
          "label": "Banner More"
        },
        {
          "type": "color",
          "id": "banner_more_color",
          "label": "Banner More Color"
        },
        {
          "type": "richtext",
          "id": "banner_more_mob",
          "label": "Banner More Mob"
        },
        {
          "type": "color",
          "id": "banner_more_color_mob",
          "label": "Banner More Color Mob"
        }
      ]
    }
  ]
}
{% endschema %}
