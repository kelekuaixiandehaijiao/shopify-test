{%- capture section_settings -%}
    {
        "type":{{ settings.cart_type | json }},
        "itemCount":{{ cart.item_count }},
        "drawer": true,
        "hasShippingEstimator": false
    }
{%- endcapture -%}
{%- assign country_code_var = localization.country.iso_code | downcase -%}

<div id="sidebar-cart" class="Drawer Drawer--fromRight fb-new-siderbar-cart" aria-hidden="true" data-section-id="cart" data-section-type="cart" data-section-settings='{{ section_settings }}'>
  <div class="Drawer__Header Drawer__Header--bordered Drawer__Container">
    <span class="Drawer__Title Heading u-h4 cart_drawer_top">{{ 'cart.general.title' | t }}
    </span>

    <button class="Drawer__Close Icon-Wrapper--clickable" data-action="close-drawer" data-drawer-id="sidebar-cart" aria-label="{{ 'header.navigation.close_cart' | t }}">
      {%- render 'icon' with 'close' -%}
    </button>
  </div>

  <form class="Cart Drawer__Content js-cart-drawer" action="{{ routes.cart_url }}" method="POST" novalidate>
    <div class="Drawer__Main" data-scrollable>
      {%- if settings.cart_show_free_shipping_threshold -%}
        {%- assign threshold_in_cents = settings.cart_free_shipping_threshold | times: 100 -%}

        <div class="Cart__ShippingNotice Text--subdued">
          <div class="Drawer__Container">
            {%- if cart.total_price >= threshold_in_cents -%}
              <p>{{- 'cart.general.free_shipping' | t -}}
              </p>
            {%- else -%}
              {%- capture remaining_amount -%}
                <span>{{ cart.total_price | minus: threshold_in_cents | abs | money_without_trailing_zeros }}
                </span>
              {%- endcapture -%}
              <p>{{- 'cart.general.free_shipping_remaining_html' | t: remaining_amount: remaining_amount -}}
              </p>
            {%- endif -%}
          </div>
        </div>
      {%- endif -%}
      
      {%- if cart.item_count == 0 -%}
        <p class="Cart__Empty Heading u-h5 card_drawer_title">{{ 'cart.general.empty' | t }}
          {%- if country_code_var == 'gb' -%}
          <a href="https://global.freebeatfit.com/en-uk/collections/exercise-bikes" class="EmptyState__Action Button Button--primary cart_drawer_button">{{ 'cart.general.empty_button' | t }}</a>
          {%- elsif country_code_var == 'au' -%}
          <a href="https://global.freebeatfit.com/en-au/collections/exercise-bikes" class="EmptyState__Action Button Button--primary cart_drawer_button">{{ 'cart.general.empty_button' | t }}</a>
          {%- else -%}
          <a href="/collections/exercise-bikes" class="EmptyState__Action Button Button--primary cart_drawer_button">{{ 'cart.general.empty_button' | t }}</a>
          {%-  endif  -%}

        </p>
      {%- else -%}
        <div class="Drawer__Container">
          <input type="hidden" name="attributes[collection_mobile_items_per_row]" value="">
          <input type="hidden" name="attributes[collection_desktop_items_per_row]" value="">
          {% render 'cart-items' %}
        </div>
      {%- endif -%}
    </div>

    {%- unless cart.item_count == 0 -%}
      <div class="Drawer__Footer" data-drawer-animated-bottom>
        <!-- <div class="custom-pay">pay as low as ${{ settings.product.selected_or_first_available_variant.price | plus: settings.fb_lit_bike_shipping_rate | divided_by: 3600.0 | round: 2 }}/mo<sup>1</sup> at 0% APR</div> -->
        <!--         <div class="custom-pay">freebells cannot be purchased independently</div> -->
        {%- capture shipping_and_taxes_notice -%}
            {{ 'cart.general.shipping_and_taxes_notice' | t }}
        {%- endcapture -%}
        {%- if settings.cart_enable_notes or shipping_and_taxes_notice != blank -%}
            {%- if settings.cart_enable_notes -%}
              {%- if cart.note == blank -%}
                <button type="button" class="Cart__NoteButton" data-action="toggle-cart-note"> {{ 'cart.general.add_note' | t }}
              </button>
            {%- else -%}
              <button type="button" class="Cart__NoteButton" data-action="toggle-cart-note">{{ 'cart.general.edit_note' | t }}
              </button>
            {%- endif -%}
        {%- endif -%}

        {% comment %} {%- if shipping_and_taxes_notice != blank -%}
            <p class="Cart__Taxes Text--subdued">{{ shipping_and_taxes_notice }}
            </p>
        {%- endif -%} {% endcomment %}
        {%- if cart.cart_level_discount_applications != blank -%}
            {%- for discount_application in cart.cart_level_discount_applications -%}
              <p class="Cart__Discount">{%- render 'icon' with 'sale' -%}
                {{ 'cart.general.discount' | t }}
                ({{ discount_application.title }}
                ): -<span>{{ discount_application.total_allocated_amount | money_without_trailing_zeros }}
                </span>
              </p>
            {%- endfor -%}
          {%- endif -%}
        {%- endif -%}
       
        <button type="submit" name="checkout" fb_checkout="checkout" class="fb_Cart__Checkout Button Button--primary Button--full">
          <span>{{- 'cart.general.checkout' | t -}}
          </span>
          <span class="Button__SeparatorDot"></span>
          {% comment %}
            {% for i in cart.items %}
            {% if i.product_id == 6953648259257 %}
            {% for k in cart.items %}
            {% if k.product_id == 7119887433913 %}
            {% assign itemMinus = k.quantity | times: 9900 %}
            {% assign dumbbel = true %}
            {%- endif -%}
            {% endfor %}
            {%- endif -%}
            {% endfor %}
            {%- if dumbbel == true and itemMinus -%}
            <span>{{cart.total_price | minus: itemMinus  | money_without_trailing_zeros}}</span>
            {%- else -%}
            <span>{{cart.total_price | money_without_trailing_zeros}}</span>
            {%- endif -%}
          {% endcomment %}
          <span>{{cart.total_price | money_without_trailing_zeros}}</span>
        </button>

        {%- if shipping_and_taxes_notice != blank -%}
            <p class="Cart__Taxes Text--subdued">{{ shipping_and_taxes_notice }}
            </p>
        {%- endif -%}
        <ul class="fb-minicart-payment"> 
            {%- for type in shop.enabled_payment_types -%}
                <li class="fb-minicart-payment-item">{{ type | payment_type_svg_tag }}</li>
            {%- endfor -%}
            {% unless country_code_var == 'au' %}
              <li class="fb-minicart-payment-item">{{ 'klarna' | payment_type_svg_tag }}</li>
            {% endunless %}

        </ul>

        {%- if settings.cart_enable_notes -%}
          <div class="Cart__OffscreenNoteContainer" aria-hidden="true">
            {%- if cart.note == blank -%}
              <span class="Cart__NoteButton">{{ 'cart.general.add_note' | t }}
              </span>
            {%- else -%}
              <span class="Cart__NoteButton">{{ 'cart.general.edit_note' | t }}
              </span>
            {%- endif -%}

            <div class="Form__Item">
              <textarea class="Cart__Note Form__Textarea" name="note" id="cart-note" rows="3" placeholder="{{ 'cart.general.note_placeholder' | t }}" data-scrollable>{{ cart.note }}
              </textarea>
            </div>

            <button type="button" class="Button Button--primary Button--full" data-action="toggle-cart-note">{{ 'cart.general.save_note' | t }}
            </button>
          </div>
        {%- endif -%}
      </div>
    {%- endunless -%}
  </form>
</div>
<style>
  @media only screen and (min-width:  769px){
        .cart_drawer_top{
          font-size: 20px!important;
          font-family: Montserrat-Bold, Montserrat!important;
          font-weight: bold!important;
          color: #121212!important;
          line-height: 20px!important;
        }
        .card_drawer_title{
          font-size: 16px!important;
          font-family: Montserrat-Bold, Montserrat!important;
          font-weight: bold!important;
          color: #666666!important;
          line-height: 16px!important;
        }
        .cart_drawer_button{
          border: 2px solid #121212!important;
          font-size: 16px!important;
          font-weight: bold!important;
          font-family: Montserrat-Bold, Montserrat!important;
          letter-spacing: 0!important;
          color: #121212!important;
          padding: 16px 53px!important;
          width: 244px;
          height: 52px;
          margin-top: 32px!important;
        }
        .cart_drawer_button::before{
          background: #fff!important;
        }
  }
  @media only screen and (max-width:  768px){
    .cart_drawer_top{
          font-size: 16px!important;
          font-family: Montserrat-Bold, Montserrat!important;
          font-weight: bold!important;
          color: #121212!important;
          line-height: 16px!important;
    }
    .card_drawer_title{
      font-size: 12px!important;
      font-weight: bold!important;
      font-family: Montserrat-Bold, Montserrat!important;
      line-height: 12px!important;
      color: #666666!important;
      margin-bottom: 0!important;
    }
    .cart_drawer_button{
      border: 1px solid #121212!important;
      font-size: 12px!important;
      font-weight: bold!important;
      font-family: Montserrat-Bold, Montserrat!important;
      letter-spacing: 0!important;
      color: #121212!important;
      padding: 14px 39px 14px 40px!important;
      width: 182px;
      height: 42px;
      margin-top: 24px!important;
      display: block;
      margin: auto;
    }
    .cart_drawer_button::before{
      background: #fff!important;
    }
  }
  {% comment %} rechange css {% endcomment %}
    .fb-new-siderbar-cart .fb_Cart__Checkout {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .fb-new-siderbar-cart .Cart__Taxes{
        margin-top: 12px;
        text-align: center;
        font-size: 12px;
        font-weight: 500;
        color: #00CC45;
        line-height: 12px;
    }
    {% comment %} .fb-new-siderbar-cart .Heading{
        font-weight: 600;
    }
    @media screen and (min-width: 641px){
        .fb-new-siderbar-cart .CartItem__Title{
            font-size: 18px;
            line-height: 18px;
        }
        .fb-new-siderbar-cart .CartItem__Discount{
            font-size: 12px;
        }
    }
    @media screen and (max-width: 640px){
        .fb-new-siderbar-cart .CartItem__Title{
            font-size: 18px;
            line-height: 18px;
        }
        .fb-new-siderbar-cart .CartItem__Discount{
            font-size: 12px;
        }
        .fb-new-siderbar-cart .CartItem__LinePriceList {
            font-size: 20px;
            line-height: 20px;
        }
    } {% endcomment %}
  {% comment %} payment develop {% endcomment %}
    .fb-minicart-payment {
        padding-top: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    @media screen and (min-width: 769px) {
        .fb-minicart-payment {
            padding-top: 4px;
            display: flex;
            align-items: center;
        }
        .fb-minicart-payment-item {
            height: 24px;
            line-height: 24px;
            justify-content: center;
            margin: 0px 5px;
        }
       
    }

    @media screen and (max-width: 768px) {
        .fb-minicart-payment {
            width: 100%;
            margin-top: 4px;
            height: auto;
            /* padding-top: 4px; */
            display: flex;
            justify-content: flex-start;
            align-items: center;
            overflow-x: scroll;
            overflow-y:hidden;
        }
        .fb-minicart-payment-item {
            height: 24px;
            line-height: 24px;
            justify-content: center;
            margin: 0px 5px;
        }
    }
</style>